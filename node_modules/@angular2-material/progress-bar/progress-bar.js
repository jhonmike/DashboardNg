"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
// TODO(josephperrott): Benchpress tests.
// TODO(josephperrott): Add ARIA attributes for progressbar "for".
/**
 * <md-progress-bar> component.
 */
var MdProgressBar = (function () {
    function MdProgressBar() {
        /**
         * Value of the progressbar.
         *
         * Defaults to zero. Mirrored to aria-valuenow.
         */
        this._value = 0;
        /**
         * Buffer value of the progress bar.
         *
         * Defaults to zero.
         */
        this._bufferValue = 0;
        /**
         * Mode of the progress bar.
         *
         * Input must be one of these values: determinate, indeterminate, buffer, query, defaults to
         * 'determinate'.
         * Mirrored to mode attribute.
         */
        this.mode = 'determinate';
    }
    Object.defineProperty(MdProgressBar.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (v) {
            this._value = MdProgressBar.clamp(v || 0);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MdProgressBar.prototype, "bufferValue", {
        get: function () {
            return this._bufferValue;
        },
        set: function (v) {
            this._bufferValue = MdProgressBar.clamp(v || 0);
        },
        enumerable: true,
        configurable: true
    });
    /** Gets the current transform value for the progress bar's primary indicator. */
    MdProgressBar.prototype.primaryTransform = function () {
        var scale = this.value / 100;
        return "scaleX(" + scale + ")";
    };
    /**
     * Gets the current transform value for the progress bar's buffer indicator.  Only used if the
     * progress mode is set to buffer, otherwise returns an undefined, causing no transformation.
     */
    MdProgressBar.prototype.bufferTransform = function () {
        if (this.mode == 'buffer') {
            var scale = this.bufferValue / 100;
            return "scaleX(" + scale + ")";
        }
    };
    /** Clamps a value to be between two numbers, by default 0 and 100. */
    MdProgressBar.clamp = function (v, min, max) {
        if (min === void 0) { min = 0; }
        if (max === void 0) { max = 100; }
        return Math.max(min, Math.min(max, v));
    };
    __decorate([
        core_1.Input(),
        core_1.HostBinding('attr.aria-valuenow'), 
        __metadata('design:type', Object)
    ], MdProgressBar.prototype, "value", null);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', Object)
    ], MdProgressBar.prototype, "bufferValue", null);
    __decorate([
        core_1.Input(),
        core_1.HostBinding('attr.mode'), 
        __metadata('design:type', Object)
    ], MdProgressBar.prototype, "mode", void 0);
    MdProgressBar = __decorate([
        core_1.Component({
            selector: 'md-progress-bar',
            host: {
                'role': 'progressbar',
                'aria-valuemin': '0',
                'aria-valuemax': '100',
            },
            template: "\n              <!-- The background div is named as such because it appears below the other divs and is not sized based on values. -->\n              <div class=\"md-progress-bar-background\"></div>\n              <div class=\"md-progress-bar-buffer\" [style.transform]=\"bufferTransform()\"></div>\n              <div class=\"md-progress-bar-primary md-progress-bar-fill\" [style.transform]=\"primaryTransform()\"></div>\n              <div class=\"md-progress-bar-secondary md-progress-bar-fill\"></div>\n            ",
            styles: ["\n              /** In buffer mode a repeated SVG object is used as a background.  Each of the following defines the SVG object for each\n                  of the class defined colors.\n\n                  Each string is a URL encoded version of:\n\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                       version=\"1.1\" x=\"0px\" y=\"0px\" enable-background=\"new 0 0 5 2\"\n                       xml:space=\"preserve\" viewBox=\"0 0 5 2\" preserveAspectRatio=\"none slice\">\n                    <circle cx=\"1\" cy=\"1\" r=\"1\" fill=\"{INJECTED_COLOR}\"/>\n                  </svg>\n\n                  */\n              :host {\n                display: block;\n                height: 5px;\n                overflow: hidden;\n                position: relative;\n                -webkit-transform: translateZ(0);\n                        transform: translateZ(0);\n                -webkit-transition: opacity 250ms linear;\n                transition: opacity 250ms linear;\n                width: 100%;\n                /**\n                 * The progress bar buffer is the bar indicator showing the buffer value and is only visible beyond the current value\n                 * of the primary progress bar.\n                 */\n                /**\n                 * The secondary progress bar is only used in the indeterminate animation, because of this it is hidden in other uses.\n                 */\n                /**\n                * The progress bar fill fills the progress bar with the indicator color.\n                */\n                /**\n                * A pseudo element is created for each progress bar bar that fills with the indicator color.\n                */ }\n                :host .md-progress-bar-background {\n                  background: url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%271.1%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20xmlns%3Axlink%3D%27http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%27%20x%3D%270px%27%20y%3D%270px%27%20enable-background%3D%27new%200%200%205%202%27%20xml%3Aspace%3D%27preserve%27%20viewBox%3D%270%200%205%202%27%20preserveAspectRatio%3D%27none%20slice%27%3E%3Ccircle%20cx%3D%271%27%20cy%3D%271%27%20r%3D%271%27%20fill%3D%27#b2dfdb%27%2F%3E%3C%2Fsvg%3E\");\n                  background-repeat: repeat-x;\n                  background-size: 10px 4px;\n                  height: 100%;\n                  position: absolute;\n                  visibility: hidden;\n                  width: 100%; }\n                :host .md-progress-bar-buffer {\n                  background-color: #b2dfdb;\n                  height: 100%;\n                  position: absolute;\n                  -webkit-transform-origin: top left;\n                          transform-origin: top left;\n                  -webkit-transition: -webkit-transform 250ms ease;\n                  transition: -webkit-transform 250ms ease;\n                  transition: transform 250ms ease;\n                  transition: transform 250ms ease, -webkit-transform 250ms ease;\n                  width: 100%; }\n                :host .md-progress-bar-secondary {\n                  visibility: hidden; }\n                :host .md-progress-bar-fill {\n                  -webkit-animation: none;\n                          animation: none;\n                  height: 100%;\n                  position: absolute;\n                  -webkit-transform-origin: top left;\n                          transform-origin: top left;\n                  -webkit-transition: -webkit-transform 250ms ease;\n                  transition: -webkit-transform 250ms ease;\n                  transition: transform 250ms ease;\n                  transition: transform 250ms ease, -webkit-transform 250ms ease;\n                  width: 100%; }\n                :host .md-progress-bar-fill::after {\n                  -webkit-animation: none;\n                          animation: none;\n                  background-color: #00897b;\n                  content: '';\n                  display: inline-block;\n                  height: 100%;\n                  position: absolute;\n                  width: 100%; }\n                :host[color=\"accent\"] .md-progress-bar-background {\n                  background: url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%271.1%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20xmlns%3Axlink%3D%27http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%27%20x%3D%270px%27%20y%3D%270px%27%20enable-background%3D%27new%200%200%205%202%27%20xml%3Aspace%3D%27preserve%27%20viewBox%3D%270%200%205%202%27%20preserveAspectRatio%3D%27none%20slice%27%3E%3Ccircle%20cx%3D%271%27%20cy%3D%271%27%20r%3D%271%27%20fill%3D%27#e1bee7%27%2F%3E%3C%2Fsvg%3E\");\n                  background-repeat: repeat-x;\n                  background-size: 10px 4px; }\n                :host[color=\"accent\"] .md-progress-bar-buffer {\n                  background-color: #e1bee7; }\n                :host[color=\"accent\"] .md-progress-bar-fill::after {\n                  background-color: #8e24aa; }\n                :host[color=\"warn\"] .md-progress-bar-background {\n                  background: url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%271.1%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20xmlns%3Axlink%3D%27http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%27%20x%3D%270px%27%20y%3D%270px%27%20enable-background%3D%27new%200%200%205%202%27%20xml%3Aspace%3D%27preserve%27%20viewBox%3D%270%200%205%202%27%20preserveAspectRatio%3D%27none%20slice%27%3E%3Ccircle%20cx%3D%271%27%20cy%3D%271%27%20r%3D%271%27%20fill%3D%27#ffcdd2%27%2F%3E%3C%2Fsvg%3E\");\n                  background-repeat: repeat-x;\n                  background-size: 10px 4px; }\n                :host[color=\"warn\"] .md-progress-bar-buffer {\n                  background-color: #ffcdd2; }\n                :host[color=\"warn\"] .md-progress-bar-fill::after {\n                  background-color: #e53935; }\n                :host[mode=\"query\"] {\n                  -webkit-transform: rotateZ(180deg);\n                          transform: rotateZ(180deg); }\n                :host[mode=\"indeterminate\"] .md-progress-bar-fill, :host[mode=\"query\"] .md-progress-bar-fill {\n                  -webkit-transition: none;\n                  transition: none; }\n                :host[mode=\"indeterminate\"] .md-progress-bar-primary, :host[mode=\"query\"] .md-progress-bar-primary {\n                  -webkit-animation: md-progress-bar-primary-indeterminate-translate 2s infinite linear;\n                          animation: md-progress-bar-primary-indeterminate-translate 2s infinite linear;\n                  left: -145.166611%; }\n                :host[mode=\"indeterminate\"] .md-progress-bar-primary.md-progress-bar-fill::after, :host[mode=\"query\"] .md-progress-bar-primary.md-progress-bar-fill::after {\n                  -webkit-animation: md-progress-bar-primary-indeterminate-scale 2s infinite linear;\n                          animation: md-progress-bar-primary-indeterminate-scale 2s infinite linear; }\n                :host[mode=\"indeterminate\"] .md-progress-bar-secondary, :host[mode=\"query\"] .md-progress-bar-secondary {\n                  -webkit-animation: md-progress-bar-secondary-indeterminate-translate 2s infinite linear;\n                          animation: md-progress-bar-secondary-indeterminate-translate 2s infinite linear;\n                  left: -54.888891%;\n                  visibility: visible; }\n                :host[mode=\"indeterminate\"] .md-progress-bar-secondary.md-progress-bar-fill::after, :host[mode=\"query\"] .md-progress-bar-secondary.md-progress-bar-fill::after {\n                  -webkit-animation: md-progress-bar-secondary-indeterminate-scale 2s infinite linear;\n                          animation: md-progress-bar-secondary-indeterminate-scale 2s infinite linear; }\n                :host[mode=\"buffer\"] .md-progress-bar-background {\n                  -webkit-animation: md-progress-bar-background-scroll 250ms infinite linear;\n                          animation: md-progress-bar-background-scroll 250ms infinite linear;\n                  visibility: visible; }\n\n              :host-context([dir=\"rtl\"]) {\n                -webkit-transform: rotateY(180deg);\n                        transform: rotateY(180deg); }\n\n              /** The values used for animations in md-progress-bar, both timing and transformation, can be considered magic values.\n                  They are sourced from the Material Design example spec and duplicate the values of the original designers\n                  definitions.\n\n\n                  The indeterminate state is essentially made up of two progress bars, one primary (the one that is shown in both the\n                  determinate and indeterminate states) and one secondary, which essentially mirrors the primary progress bar in\n                  appearance but is only shown to assist with the indeterminate animations.\n\n\n                  KEYFRAME BLOCK\t                    DESCRIPTION\n                  primary-indeterminate-translate     Translation of the primary progressbar across the screen\n                  primary-indeterminate-scale         Scaling of the primary progressbar as it's being translated across the screen\n                  secondary-indeterminate-translate   Translation of the secondary progressbar across the screen\n                  secondary-indeterminate-scale       Scaling of the secondary progressbar as it's being translated across the screen\n\n                  Because two different transform animations need to be applied at once, the translation is applied to the outer\n                  element and the scaling is applied to the inner element, which provides the illusion necessary to make the animation\n                  work.\n              */\n              /** Animations for indeterminate and query mode. */\n              @-webkit-keyframes md-progress-bar-primary-indeterminate-translate {\n                0% {\n                  -webkit-transform: translateX(0px);\n                          transform: translateX(0px); }\n                20% {\n                  -webkit-animation-timing-function: cubic-bezier(0.5, 0, 0.70173, 0.49582);\n                          animation-timing-function: cubic-bezier(0.5, 0, 0.70173, 0.49582);\n                  -webkit-transform: translateX(0px);\n                          transform: translateX(0px); }\n                59.15% {\n                  -webkit-animation-timing-function: cubic-bezier(0.30244, 0.38135, 0.55, 0.95635);\n                          animation-timing-function: cubic-bezier(0.30244, 0.38135, 0.55, 0.95635);\n                  -webkit-transform: translateX(83.67142%);\n                          transform: translateX(83.67142%); }\n                100% {\n                  -webkit-transform: translateX(200.61106%);\n                          transform: translateX(200.61106%); } }\n              @keyframes md-progress-bar-primary-indeterminate-translate {\n                0% {\n                  -webkit-transform: translateX(0px);\n                          transform: translateX(0px); }\n                20% {\n                  -webkit-animation-timing-function: cubic-bezier(0.5, 0, 0.70173, 0.49582);\n                          animation-timing-function: cubic-bezier(0.5, 0, 0.70173, 0.49582);\n                  -webkit-transform: translateX(0px);\n                          transform: translateX(0px); }\n                59.15% {\n                  -webkit-animation-timing-function: cubic-bezier(0.30244, 0.38135, 0.55, 0.95635);\n                          animation-timing-function: cubic-bezier(0.30244, 0.38135, 0.55, 0.95635);\n                  -webkit-transform: translateX(83.67142%);\n                          transform: translateX(83.67142%); }\n                100% {\n                  -webkit-transform: translateX(200.61106%);\n                          transform: translateX(200.61106%); } }\n\n              @-webkit-keyframes md-progress-bar-primary-indeterminate-scale {\n                0% {\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); }\n                36.65% {\n                  -webkit-animation-timing-function: cubic-bezier(0.33473, 0.12482, 0.78584, 1);\n                          animation-timing-function: cubic-bezier(0.33473, 0.12482, 0.78584, 1);\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); }\n                69.15% {\n                  -webkit-animation-timing-function: cubic-bezier(0.06, 0.11, 0.6, 1);\n                          animation-timing-function: cubic-bezier(0.06, 0.11, 0.6, 1);\n                  -webkit-transform: scaleX(0.66148);\n                          transform: scaleX(0.66148); }\n                100% {\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); } }\n\n              @keyframes md-progress-bar-primary-indeterminate-scale {\n                0% {\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); }\n                36.65% {\n                  -webkit-animation-timing-function: cubic-bezier(0.33473, 0.12482, 0.78584, 1);\n                          animation-timing-function: cubic-bezier(0.33473, 0.12482, 0.78584, 1);\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); }\n                69.15% {\n                  -webkit-animation-timing-function: cubic-bezier(0.06, 0.11, 0.6, 1);\n                          animation-timing-function: cubic-bezier(0.06, 0.11, 0.6, 1);\n                  -webkit-transform: scaleX(0.66148);\n                          transform: scaleX(0.66148); }\n                100% {\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); } }\n\n              @-webkit-keyframes md-progress-bar-secondary-indeterminate-translate {\n                0% {\n                  -webkit-animation-timing-function: cubic-bezier(0.15, 0, 0.51506, 0.40969);\n                          animation-timing-function: cubic-bezier(0.15, 0, 0.51506, 0.40969);\n                  -webkit-transform: translateX(0px);\n                          transform: translateX(0px); }\n                25% {\n                  -webkit-animation-timing-function: cubic-bezier(0.31033, 0.28406, 0.8, 0.73371);\n                          animation-timing-function: cubic-bezier(0.31033, 0.28406, 0.8, 0.73371);\n                  -webkit-transform: translateX(37.65191%);\n                          transform: translateX(37.65191%); }\n                48.35% {\n                  -webkit-animation-timing-function: cubic-bezier(0.4, 0.62704, 0.6, 0.90203);\n                          animation-timing-function: cubic-bezier(0.4, 0.62704, 0.6, 0.90203);\n                  -webkit-transform: translateX(84.38617%);\n                          transform: translateX(84.38617%); }\n                100% {\n                  -webkit-transform: translateX(160.27778%);\n                          transform: translateX(160.27778%); } }\n\n              @keyframes md-progress-bar-secondary-indeterminate-translate {\n                0% {\n                  -webkit-animation-timing-function: cubic-bezier(0.15, 0, 0.51506, 0.40969);\n                          animation-timing-function: cubic-bezier(0.15, 0, 0.51506, 0.40969);\n                  -webkit-transform: translateX(0px);\n                          transform: translateX(0px); }\n                25% {\n                  -webkit-animation-timing-function: cubic-bezier(0.31033, 0.28406, 0.8, 0.73371);\n                          animation-timing-function: cubic-bezier(0.31033, 0.28406, 0.8, 0.73371);\n                  -webkit-transform: translateX(37.65191%);\n                          transform: translateX(37.65191%); }\n                48.35% {\n                  -webkit-animation-timing-function: cubic-bezier(0.4, 0.62704, 0.6, 0.90203);\n                          animation-timing-function: cubic-bezier(0.4, 0.62704, 0.6, 0.90203);\n                  -webkit-transform: translateX(84.38617%);\n                          transform: translateX(84.38617%); }\n                100% {\n                  -webkit-transform: translateX(160.27778%);\n                          transform: translateX(160.27778%); } }\n\n              @-webkit-keyframes md-progress-bar-secondary-indeterminate-scale {\n                0% {\n                  -webkit-animation-timing-function: cubic-bezier(0.15, 0, 0.51506, 0.40969);\n                          animation-timing-function: cubic-bezier(0.15, 0, 0.51506, 0.40969);\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); }\n                19.15% {\n                  -webkit-animation-timing-function: cubic-bezier(0.31033, 0.28406, 0.8, 0.73371);\n                          animation-timing-function: cubic-bezier(0.31033, 0.28406, 0.8, 0.73371);\n                  -webkit-transform: scaleX(0.4571);\n                          transform: scaleX(0.4571); }\n                44.15% {\n                  -webkit-animation-timing-function: cubic-bezier(0.4, 0.62704, 0.6, 0.90203);\n                          animation-timing-function: cubic-bezier(0.4, 0.62704, 0.6, 0.90203);\n                  -webkit-transform: scaleX(0.72796);\n                          transform: scaleX(0.72796); }\n                100% {\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); } }\n\n              @keyframes md-progress-bar-secondary-indeterminate-scale {\n                0% {\n                  -webkit-animation-timing-function: cubic-bezier(0.15, 0, 0.51506, 0.40969);\n                          animation-timing-function: cubic-bezier(0.15, 0, 0.51506, 0.40969);\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); }\n                19.15% {\n                  -webkit-animation-timing-function: cubic-bezier(0.31033, 0.28406, 0.8, 0.73371);\n                          animation-timing-function: cubic-bezier(0.31033, 0.28406, 0.8, 0.73371);\n                  -webkit-transform: scaleX(0.4571);\n                          transform: scaleX(0.4571); }\n                44.15% {\n                  -webkit-animation-timing-function: cubic-bezier(0.4, 0.62704, 0.6, 0.90203);\n                          animation-timing-function: cubic-bezier(0.4, 0.62704, 0.6, 0.90203);\n                  -webkit-transform: scaleX(0.72796);\n                          transform: scaleX(0.72796); }\n                100% {\n                  -webkit-transform: scaleX(0.08);\n                          transform: scaleX(0.08); } }\n\n              /** Animation for buffer mode. */\n              @-webkit-keyframes md-progress-bar-background-scroll {\n                to {\n                  -webkit-transform: translateX(-10px);\n                          transform: translateX(-10px); } }\n              @keyframes md-progress-bar-background-scroll {\n                to {\n                  -webkit-transform: translateX(-10px);\n                          transform: translateX(-10px); } }\n            "],
            changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        }), 
        __metadata('design:paramtypes', [])
    ], MdProgressBar);
    return MdProgressBar;
}());
exports.MdProgressBar = MdProgressBar;
//# sourceMappingURL=progress-bar.js.map
